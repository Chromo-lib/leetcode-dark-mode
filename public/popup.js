!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";const e=[{value:"USD",icon:"united-states.svg"},{value:"EUR",icon:"european-union.svg"},{value:"JPY",icon:"japan.svg"},{value:"GBP",icon:"united-kingdom.svg"},{value:"AUD",icon:"australia.svg"},{value:"CAD",icon:"canada.svg"},{value:"CHF",icon:"switzerland.svg"},{value:"CNY",icon:"china.svg"},{value:"SEK",icon:"sweden.svg"},{value:"NZD",icon:"new-zealand.svg"},{value:"MXN",icon:"mexico.svg"},{value:"SGD",icon:"singapore.svg"},{value:"HKD",icon:"hong-kong.svg"},{value:"NOK",icon:"norway.svg"},{value:"KRW",icon:"south-korea.svg"},{value:"TRY",icon:"turkey.svg"},{value:"RUB",icon:"russia.svg"},{value:"INR",icon:"india.svg"},{value:"BRL",icon:"brazil.svg"},{value:"ZAR",icon:"south-africa.svg"},{value:"PHP",icon:"philippines.svg"},{value:"CZK",icon:"czech-republic.svg"},{value:"IDR",icon:"indonesia.svg"},{value:"MYR",icon:"malaysia.svg"},{value:"HUF",icon:"hungary.svg"},{value:"ISK",icon:"iceland.svg"},{value:"HRK",icon:"croatia.svg"},{value:"BGN",icon:"bulgaria.svg"},{value:"RON",icon:"romania.svg"},{value:"DKK",icon:"denmark.svg"},{value:"THB",icon:"thailand.svg"},{value:"PLN",icon:"poland.svg"},{value:"ILS",icon:"israel.svg"},{value:"AED",icon:"united-arab-emirates.svg"},{value:"ARS",icon:"argentina.svg"},{value:"BSD",icon:"bahamas.svg"},{value:"CLP",icon:"chile.svg"},{value:"COP",icon:"colombia.svg"},{value:"DOP",icon:"dominican-republic.svg"},{value:"EGP",icon:"egypt.svg"},{value:"FJD",icon:"fiji.svg"},{value:"GTQ",icon:"guatemala.svg"},{value:"KZT",icon:"kazakhstan.svg"},{value:"PAB",icon:"panama.svg"},{value:"PEN",icon:"peru.svg"},{value:"PKR",icon:"pakistan.svg"},{value:"PYG",icon:"paraguay.svg"},{value:"SAR",icon:"saudi-arabia.svg"},{value:"TWD",icon:"taiwan.svg"},{value:"UAH",icon:"ukraine.svg"},{value:"UYU",icon:"uruguay.svg"},{value:"VND",icon:"vietnam.svg"},{value:"TND",icon:"tunisia.svg"}];function n(n,t=null){const a=document.createElement("div");a.classList.add("dropdown");const i=document.createElement("ul");i.classList.add("list"),e.forEach(e=>{const n=document.createElement("li");n.id=e.value,n.dataset.icon=e.icon,n.innerHTML=`<img src="assets/countries/${e.icon}" width="24" alt="${e.value}">${e.value}`,i.appendChild(n)});const o=function(){const e=document.createElement("input");return e.type="text",e.classList.add("field"),e.readOnly="readonly",e}(),s=function(){const e=document.createElement("img");return e.classList.add("img-input"),e}();t&&t.query?(o.value="ifrom-currency"===n?t.query.from:t.query.to,s.src="assets/countries/"+("ifrom-currency"===n?e.find(e=>e.value===t.query.from).icon:e.find(e=>e.value===t.query.to).icon)):(o.value="ifrom-currency"===n?e[0].value:e[1].value,s.src="assets/countries/"+("ifrom-currency"===n?e[0].icon:e[1].icon));let c=document.createElement("div");c.classList.add("input-container","d-flex"),c.id=n,c.appendChild(s),c.appendChild(o),a.appendChild(c),a.appendChild(i),document.querySelector(".drops").appendChild(a);let l=!1;a.addEventListener("click",e=>{l=!l,i.style.display=l?"inline":"none",e.target.id!==n&&e.target.dataset&&"LI"===e.target.nodeName&&(o.value=e.target.id,s.src="assets/countries/"+e.target.dataset.icon)},!1)}let t=null,a=!1,i=document.querySelector(".history-conversions"),o=document.querySelector(".conv-tab"),s=document.getElementById("btn-show-history"),c=document.querySelector(".spinner"),l=document.querySelector(".date-output");chrome.storage.local.get(["historyConversions"],(function(a){a&&a.historyConversions?(t=a.historyConversions.slice(0).reverse(),n("ifrom-currency",t[0]),n("ito-currency",t[0]),t.forEach(n=>{let t=e.find(e=>e.value===n.query.from).icon,a=e.find(e=>e.value===n.query.to).icon;const o=document.createElement("li");o.innerHTML=`<div class="d-flex">\n      <img src="${"assets/countries/"+t}" alt="" width="24" class="mr-10" /> ${n.query.amount} ${n.query.from} = ${n.result} ${n.query.to}\n      <img src="${"assets/countries/"+a}" alt="" width="24" class="ml-10" />\n      </div>\n      <span class="badge">${new Date(n.date).toDateString()}</span>`,i.appendChild(o)})):(n("ifrom-currency"),n("ito-currency")),l.textContent=(new Date).toDateString()})),s.addEventListener("click",(function(){c.style.display="flex",setTimeout(()=>{a=!a,i.style.display=a?"block":"none",o.style.display=a?"none":"block",s.innerHTML=a?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 2.83209C17.7751 2.2969 16.4222 2 15 2C9.47715 2 5 6.47715 5 12C5 17.5228 9.47715 22 15 22C16.4222 22 17.7751 21.7031 19 21.1679M2 10H15M2 14H15" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>':'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 22V4C5 2.89543 5.89543 2 7 2H17C18.1046 2 19 2.89543 19 4V22L12 15.8889L5 22Z" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',c.style.display="none"},500)}),!1),document.getElementById("btn-reverse").addEventListener("click",(function(){const e=document.getElementById("ifrom-currency"),n=document.getElementById("ito-currency");let t=e.children[0].src;e.children[0].src=n.children[0].src,n.children[0].src=t,t=e.children[1].value,e.children[1].value=n.children[1].value,n.children[1].value=t}),!1),document.getElementById("form-convert").addEventListener("submit",(async function(e){e.preventDefault(),c.style.display="flex";let n=+e.target.elements[2].value,t=e.target.elements[0].value,a=e.target.elements[1].value;setTimeout(()=>{(async function(e="USD",n="EUR",t=1){try{const a=`https://api.exchangerate.host/convert?from=${e}&to=${n}&amount=${t}`;let i=await fetch(a);return i=await i.json(),i}catch(e){}})(t,a,n).then(e=>{!function(e){l.textContent=new Date(e.date).toDateString(),document.getElementById("c-output").value=((e,n=4)=>{let t=Math.pow(10,n||0);return String(Math.round(e*t)/t)})(e.result)}(e),chrome.runtime.sendMessage(null,{saveConversion:e}),c.style.display="none"})},500)}),!1)}));
